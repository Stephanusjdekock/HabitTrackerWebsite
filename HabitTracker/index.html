<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Habit Tracker 2025 is a free, user-friendly tool that helps you track daily habits, stay motivated, and reach your goals. Start building better habits today!"/>
  <title>Habit Tracker</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HMQTTD03SF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-HMQTTD03SF');
  </script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Habit Tracker</h1>
    </header>
    
    <div class="tabs">
      <button class="tab active" data-tab="habits">Track Habits</button>
      <button class="tab" data-tab="chart">Progress Chart</button>
      <button class="tab" data-tab="table">Stats Table</button>
    </div>
    
    <div id="habits" class="tab-content active">
      <div class="form-group">
        <label for="habitName">Add a new habit:</label>
        <div class="input-group">
          <input type="text" id="habitName" placeholder="Enter habit name..." />
          <div id="habitSuggestions" class="suggestions" style="display: none;"></div>
          <button id="addHabit">Add</button>
        </div>
      </div>
      
      <!-- Select/Deselect controls -->
      <div class="select-controls">
        <button id="selectAllHabits" class="btn-secondary">Select All</button>
        <button id="deselectAllHabits" class="btn-secondary">Deselect All</button>
      </div>
      
      <div id="currentDay" class="current-day">
        Day 1
      </div>
      
      <div id="habitsList" class="habit-list">
        <!-- Habits will be added here -->
      </div>
      
      <div class="day-summary">
        <div class="completion-rate">0% completed today</div>
        <button id="submitDay">Submit Day</button>
      </div>
      
      <!-- Bottom buttons: Undo, Redo, Restart -->
      <div class="bottom-buttons">
        <div class="top-row">
          <button id="undoDay" class="btn-secondary">Undo</button>
          <button id="redoDay" class="btn-secondary">Redo</button>
        </div>
        <div class="bottom-row">
          <button id="restartBtn" class="btn-danger">Restart</button>
        </div>
      </div>
    </div>
    
    <div id="chart" class="tab-content">
      <h2 id="chartTitle">Streak Progress</h2>
      <div class="chart-switch">
        <button id="streakChartBtn" class="btn-secondary active">Streak</button>
        <button id="completionChartBtn" class="btn-secondary">Completion</button>
        <button id="failChartBtn" class="btn-secondary">Last Failed</button>
      </div>
      <div class="chart-controls">
        <button id="selectAllChart" class="btn-secondary">All</button>
        <button id="deselectAllChart" class="btn-secondary">Clear</button>
      </div>
      <div id="legendContainer"></div>
      <div class="chart-container">
        <!-- Div container for D3 chart -->
        <div id="streakChart"></div>
      </div>
      <div id="timeframeControls" class="chart-switch" style="display:none;">
        <button class="btn-secondary active" data-timeframe="all">All Time</button>
        <button class="btn-secondary" data-timeframe="term">Term</button>
        <button class="btn-secondary" data-timeframe="month">Month</button>
        <button class="btn-secondary" data-timeframe="week">Week</button>
      </div>
    </div>

    <div id="table" class="tab-content">
      <h2 id="tableTitle">Habits Overview</h2>

      <div class="chart-switch table-switch">
        <button id="overviewTableBtn" class="btn-secondary active">Overview</button>
        <button id="weekViewBtn" class="btn-secondary">Week View</button>
      </div>

      <div id="overviewSection">
        <div class="filter-controls">
          <input type="text" id="tableSearch" placeholder="Search habits..." />
          <button id="resetFilters">Reset Filters</button>
        </div>

        <div class="table-container">
          <table id="habitsTable">
            <thead>
              <tr>
                <th data-sort="name">Habit Name <span class="sort-icon">▲</span></th>
                <th data-sort="streak">Current Streak <span class="sort-icon">⇅</span></th>
                <th data-sort="completion">Completion Rate <span class="sort-icon">⇅</span></th>
                <th data-sort="lastFailed">Last Failed <span class="sort-icon">⇅</span></th>
                <th data-sort="lastCompleted">Last Completed <span class="sort-icon">⇅</span></th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <!-- Table rows will be added here -->
            </tbody>
          </table>
        </div>
      </div>

      <div id="weekSection" style="display: none;">
        <div class="table-container">
          <table id="weekTable">
            <thead>
              <tr>
                <th data-week-sort="day">Day <span class="sort-icon">▼</span></th>
                <th>Daily Average</th>
              </tr>
            </thead>
            <tbody id="weekTableBody">
              <!-- Week view rows -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <p class="footer-text">Habit Tracker © 2025 | Build better habits, transform your life</p>

  <script src="suggestions.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
